{"data":{"allMarkdownRemark":{"edges":[{"node":{"excerpt":"One of my passions in programming is for the console. Yes, the dim, graphically uninteresting block hole of the command-line. As a software developer, nearly all of my work is done inside of a terminal window. Aside from the occasional foray into  VS…","html":"<p>One of my passions in programming is for the console. Yes, the dim, graphically uninteresting block hole of the command-line. As a software developer, nearly all of my work is done inside of a terminal window. Aside from the occasional foray into <a href=\"https://code.visualstudio.com/\">VS Code</a>, it's where I spend my time. Everything from running and inspecting local Docker containers to UI development with React in vim happens in a terminal window. Because of this, I'm always on the lookout for new tools, and, I tend to think a lot about how to extend and customize the terminal. Particularly about how to make my work more productive and enjoyable.</p>\n<p>For the past few years, <code class=\"language-text\">zsh</code> has been my default login shell of choice. As a devout Unix user, the z shell is a fairly easy choice when it comes to an easy to use and extensible bash alternative. I've even gone so far as to develop my own themes to further customize my shell. <a href=\"https://github.com/tylerreckart/hyperzsh\">One of those themes</a> has even gained a little popularity over the years.</p>\n<p>It's a fast and stable choice when it comes to your home on the command-line. But, I think that sometimes we need to go out on a limb and try out something interesting.</p>\n<p>This brings me to a few weeks ago when I discovered <a href=\"https://elv.sh\">Elvish</a>. It looked like an interesting project with surprisingly thorough documentation. Although, a quick summary on my end wouldn't do the language justice. Here's how the Language's developer describes it:</p>\n<blockquote>\n<p>\"Elvish is a cross-platform shell, supporting Linux, BSDs and Windows. It features an expressive programming language, with features like namespacing and anonymous functions, and a fully programmable user interface with friendly defaults. It is suitable for both interactive use and scripting.\"</p>\n</blockquote>\n<p>Here are a few of the things that initially drew me into the project:</p>\n<ul>\n<li>The <a href=\"https://elv.sh/ref/language.html\">Elvish Programming Language</a> is clean, expressive, and powerful. An easy to comprehend syntax makes picking up the language a lot easier than you might expect. It supports name spaces, exception handling, and proper data structures.</li>\n<li>It already has a well-documented, rich <a href=\"https://elv.sh/ref/builtin.html\">library of built-in functions</a> to aid in the development of your project's architecture.</li>\n<li>Awesome interactive features like as-you-type syntax checking and highlighting, custom completions, directory &#x26; command history and more. There's even a built-in file explorer.</li>\n</ul>\n<p>With the goal of configuring my own prompt in mind, I set out to learn Elvish. Building off of my previous shells, I used that time to develop <a href=\"https://github.com/tylerreckart/gondolin\">Gondolin</a><sup><a href=\"#1\">[1]</a></sup>. It's what I see as the next evolution of the git-centered prompt workflow that I have been developing over the past few years. What set the development of this prompt apart from the others was the difficulty involved. Elvish is still a very young language, and thus has a small ecosystem of libraries and modules.</p>\n<!-- ![](./images/gondolin_screenshot.png) -->\n<p>I didn't have years of established methods to draw on. But, that didn't stop me. By <a href=\"https://en.wikipedia.org/wiki/Grok\">grokking</a> the implementations of these features in a shell I was already familiar with, I was able to use Elvish to completely reimplement features like a branch status readout or an actively-updated colorized timestamp of the last commit.</p>\n<p>In the development of this prompt, I've really come to love Elvish. In fact, it's now my default login shell. To reiterate, the language is still in its infancy. The syntax is still a little wonky and backwards-incompatible changes still occur with relative frequency. If you're looking for absolute stability, Elvish might not be for you just yet.</p>\n<p>With that being said, so far I am very happy with Elvish, and if this sort of thing interests you I encourage you to take a look. I'm looking forward to watching and contributing to the development of Elvish going forward.</p>\n<hr>\n<ol>\n<li><strong><span id=\"1\">Gondolin</span></strong> was a city in the J. R. R. Tolkien <a href=\"https://en.wikipedia.org/wiki/Tolkien%27s_legendarium\">legendarium</a>, founded by the Elves. Found and founded with divine inspiration, it was hidden by mountains and endures for centuries before being betrayed and destroyed.</li>\n</ol>","id":"9f140df6-f1a9-5a28-8141-d722855c7505","frontmatter":{"date":"2018-06-21T17:12:33.962Z","path":"/2018/06/21/speaking-elvish","title":"Speaking Elvish"}}},{"node":{"excerpt":"Anyone that knows me well can tell you that aside from computers and technology, one of my greatest passions is for mechanical watches. There’s just something about the ability to take mechanical energy, and through a series of gears and regulation…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-149a3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABy3WYouWhf//EABsQAAMAAgMAAAAAAAAAAAAAAAECAwQRABIU/9oACAEBAAEFAmn0ZMQa8Z5kzBE9vCdyF//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAICAQUAAAAAAAAAAAAAAAABAhEhEjEyQZH/2gAIAQEABj8CcWy5SOa8HPs1W4tYwbH/xAAcEAADAAIDAQAAAAAAAAAAAAAAAREhMUFRgeH/2gAIAQEAAT8hzgNdD+ha4Uh9hipIiGjWVNsU1n6f/9oADAMBAAIAAwAAABDT/wD/xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QFX//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFB/9oACAECAQE/EHMIf//EABkQAQEAAwEAAAAAAAAAAAAAAAERACExQf/aAAgBAQABPxASqXYnl9yziBDsF3cusMqBRgud7R2YHDHgBy4rQbRXS7z/2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"IWC Tribute To Pallweber Edition ”150 Years”\"\n        title=\"\"\n        src=\"/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-2b053.jpg\"\n        srcset=\"/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-8a2b5.jpg 250w,\n/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-b0cf5.jpg 500w,\n/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-2b053.jpg 1000w,\n/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-44b5b.jpg 1500w,\n/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-a282c.jpg 2000w,\n/static/iwc_pallweber_dual-db9e59dad023a687da6ac123d10b2cbe-149a3.jpg 2100w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Anyone that knows me well can tell you that aside from computers and technology, one of my greatest passions is for mechanical watches. There’s just something about the ability to take mechanical energy, and through a series of gears and regulation mechanisms, take that energy and use it to accurately measure time that captivates me. Now, I’m fully aware that mechanical watches were made all but obsolete in the 70s at the height of the quartz revolution. Quartz watches are cheap, durable, and easy to read. So, they’re an easy choice.</p>\n<p>Mechanical watches and digital watches really couldn’t occupy more different corners of the watchmaking industry, right? Well, not exactly. There’s a strange overlap, a sort of twilight zone that exists in the middle where mechanical becomes digital and vice versa. You won’t find a dot matrix screen, a battery, or a quartz crystal in these watches. The term digital doesn’t actually refer to an electronic display. The term stems from digitus manūs, Latin for digit of the hand. Over the centuries the term was adapted to then mean any number from zero to ten. It wasn’t until the early days of computing, when computers abandoned vacuum tubes for discrete digits (the ones and zeros of binary), that term became synonymous with computing.</p>\n<p>So, when we talk about mechanical digital wristwatches, what we’re actually talking about is a watch that displays the time in the aforementioned digits, not through an electronic display. Surprisingly enough, if you look back at the history of mechanical watchmaking, digital displays aren’t anything new. We can observe examples of these displays fitted in pocket watches that date back all the way to the late 19th century.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-ed0e8.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 66.68077004442564%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFFrPaMBIP/xAAaEAEBAAIDAAAAAAAAAAAAAAACAwAQEyEi/9oACAEBAAEFAgORuJA85Lqt6ta//8QAFhEBAQEAAAAAAAAAAAAAAAAAABES/9oACAEDAQE/AY2//8QAFhEBAQEAAAAAAAAAAAAAAAAAABES/9oACAECAQE/Aaw//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAEREgIQISJx4f/aAAgBAQAGPwKuU9kpvY8OMoq3p//EABoQAQADAQEBAAAAAAAAAAAAAAEAESExYXH/2gAIAQEAAT8hQEOXSLEDoYt/sM6DpsrhV4VAyf/aAAwDAQACAAMAAAAQny//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EFGlH//EABYRAQEBAAAAAAAAAAAAAAAAABEAAf/aAAgBAgEBPxDVpC//xAAbEAACAwEBAQAAAAAAAAAAAAABEQAhMUGRof/aAAgBAQABPxBTQpgQUeEbLIl3ie+tRoWbPEHCKbLgboVwo0xez7G6n//Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"An original IWC Pallweber pocket watch, mid-1880s\"\n        title=\"\"\n        src=\"/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-2b053.jpg\"\n        srcset=\"/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-8a2b5.jpg 250w,\n/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-b0cf5.jpg 500w,\n/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-2b053.jpg 1000w,\n/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-44b5b.jpg 1500w,\n/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-a282c.jpg 2000w,\n/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-c237f.jpg 3000w,\n/static/iwc_pallweber_1880-3b048af54a50c94439b4850d6be9d277-ed0e8.jpg 4727w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>One of the most significant wristwatches today to feature a mechanical digital display is the A. Lange &#x26; Söhne Zeitwerk. The Zeitwerk was Lange’s first watch with a digital display; and in typical Lange fashion, inside of the Zeitwerk is a patented jumping minutes mechanism that unlike earlier iterations of the mechanical digital display that relied on a creeping minutes display. In fact, the Zeitwerk was the first watch to feature both a jumping mechanical digital display and the first watch to orient that display from left to right.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a-lange-sohne_zeitwerk_dial-65656b829667ff1627de8215a9e17d0a-4b8a6.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAZLWTZNGQ//EABkQAQEBAQEBAAAAAAAAAAAAAAEDAhIAIf/aAAgBAQABBQKMzTxz6im56+T25GQv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHhAAAQMEAwAAAAAAAAAAAAAAAAERIQIQElETIjH/2gAIAQEABj8C7eGXHGxZcSlkk3b/xAAbEAEAAwEAAwAAAAAAAAAAAAABABExIUFRYf/aAAgBAQABPyEXalcQeFMPYRI+45gVZkRLTffiJHs//9oADAMBAAIAAwAAABDgD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQADAAIDAQAAAAAAAAAAAAEAESExYUFRgaH/2gAIAQEAAT8QdRyFus913kJgbbKHsihArihpeH2HBgQt7Dd98/kJSiLGY8HBM+G91bn/2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"A. Lange & Söhne Zeitwerk\"\n        title=\"\"\n        src=\"/static/a-lange-sohne_zeitwerk_dial-65656b829667ff1627de8215a9e17d0a-2b053.jpg\"\n        srcset=\"/static/a-lange-sohne_zeitwerk_dial-65656b829667ff1627de8215a9e17d0a-8a2b5.jpg 250w,\n/static/a-lange-sohne_zeitwerk_dial-65656b829667ff1627de8215a9e17d0a-b0cf5.jpg 500w,\n/static/a-lange-sohne_zeitwerk_dial-65656b829667ff1627de8215a9e17d0a-2b053.jpg 1000w,\n/static/a-lange-sohne_zeitwerk_dial-65656b829667ff1627de8215a9e17d0a-44b5b.jpg 1500w,\n/static/a-lange-sohne_zeitwerk_dial-65656b829667ff1627de8215a9e17d0a-4b8a6.jpg 1680w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Now, the jumping hour mechanism isn’t anything new. Pocket watches like the original IWC Pallweber had it back in the late 19th century. Traditionally these complications featured a jumping hour display with a creeping minutes display that would often display the numerals at odd/undesirable angles. In the Zeitwerk and most recent iteration of the IWC Pallweber, the minute displays jump instantly, and while that sounds easy enough, just consider the amount of instantaneous torque required to move those discs. A typical jumping complication like a date disk advances only once per day. The three disks needed to display the hour and the two digits for the minutes require a total of 1,608 advances per day. Naturally, the Zeitwerk has a thicker mainspring to compensate for the amount of torque the barrel needs to generate.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a-lange-sohne_zeitwerk_movement-4e8b6a6439f0e77fbb5936324958ca1d-4b8a6.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABnUUecKGCv//EABsQAAMAAgMAAAAAAAAAAAAAAAECAwQQEhMh/9oACAEBAAEFAsaIoXmnAn1X62tcvr//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAADAQADAAAAAAAAAAAAAAAAARECECEx/9oACAEBAAY/ArrwaiyjoURJOP/EABsQAAICAwEAAAAAAAAAAAAAAAERACEQQVEx/9oACAEBAAE/ITDza7FCItywzGjNOlY7HQABx//aAAwDAQACAAMAAAAQjA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8QVH//xAAcEAEBAAIDAQEAAAAAAAAAAAABEQAhMUFREKH/2gAIAQEAAT8QGV1h6N/NZbnbPHW3tguEHBUhKe4kpTg6BuOsiKhY1icfP//Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Annotated A. Lange & Söhne Calibre L043.1\"\n        title=\"\"\n        src=\"/static/a-lange-sohne_zeitwerk_movement-4e8b6a6439f0e77fbb5936324958ca1d-2b053.jpg\"\n        srcset=\"/static/a-lange-sohne_zeitwerk_movement-4e8b6a6439f0e77fbb5936324958ca1d-8a2b5.jpg 250w,\n/static/a-lange-sohne_zeitwerk_movement-4e8b6a6439f0e77fbb5936324958ca1d-b0cf5.jpg 500w,\n/static/a-lange-sohne_zeitwerk_movement-4e8b6a6439f0e77fbb5936324958ca1d-2b053.jpg 1000w,\n/static/a-lange-sohne_zeitwerk_movement-4e8b6a6439f0e77fbb5936324958ca1d-44b5b.jpg 1500w,\n/static/a-lange-sohne_zeitwerk_movement-4e8b6a6439f0e77fbb5936324958ca1d-4b8a6.jpg 1680w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>In addition, Lange’s design reverses the conventional principle of winding up and winding down. A high-friction bearing bearing for the spring barrel is used to wind the movement. This change ensures that the barrel wheel can use low-friction bearings to turn as the watch winds down, leaving more energy in the mainspring. All the while, as the barrel winds down, a the Zeitwerk’s remontoire system acts as a mechanical capacitor. It gains, stores, and releases the energy required to move each disc every 60 seconds. It works like a second mainspring, wound by the movement that locks into place over the course of 60 seconds. At the end of each minute, a y-shaped lever slips free and releases the pent up torque required to turn the hours and minutes displays. However, this sudden release of energy needs an outlet to prevent damaging the movement. Lagne has this covered too with the use of a one step fly vane. A component that acts as a tiny revolving door — creating air resistance to slow the action of the movement while still allowing the disk to advance in a fraction of a second. It’s an incredibly complex and truly astonishing mechanism.</p>\n<p>Remontoire systems are used as a means of evening out power distribution to the escapement. With a remontoire, the only force applied to the escapement is that of the remontoire’s spring. This isolates the escapement from variations in power coming from the mainspring or drive train, which in turn is used to wind the remontoire’s spring as it drives the escapement. This is a sort of secondary mainspring. The remontoire’s spring is then used to provide an almost unvarying amount of torque to the escapement. This then allows the escapement to provide a consistent amount of torque needed to turn each of the display dials in a fraction of a second.</p>\n<p>Like all of Lange’s timepieces, the Zeitwerk is a bastion of mechanical excellence. However, it isn’t the only watch on the market with a mechanical digital display worth mentioning. The IWC Tribute to Pallweber, Edition “150 Years” takes a more traditional approach and as the name implies, pays tribute to the Pallweber pocket watches of the late nineteenth century. Like the Zeitwerk, the Pallweber implements a jumping hour and minute display. However, unlike the Zeitwerk, the Pallweber’s power distribution isn’t handled through a remontoire system. The IWC Calibre 94200 has two barrels, one hand-wound and one automatic that power two seperate gear trains. This allowed the movement designers to separate their power delivery concerns for each display. Because of the double-barrel design, the Pallweber has a hefty 60 hour power reserve. The Zeitwerk caps its mainspring at 36 hours, cutting you off before you pass the point in the mainspring’s power delivery curve where the remontoire spring is no longer being wound. Neither of these watches conform to the traditional notions of a mechanical wristwatch. I think that’s what interests me the most about this complication.</p>","id":"1df790e6-3b87-51fc-b320-dda64a3bf1cb","frontmatter":{"date":"2018-05-31T17:12:33.962Z","path":"/2018/05/31/the-mechanical-digital-wristwatch","title":"The Mechanical Digital Wristwatch"}}},{"node":{"excerpt":"As tools and methodologies for software development have evolved, the functional programming paradigm has washed over the tools we use across the stack.  Haskell has been a  go-to tool for developers to use for data analysis  for close to three…","html":"<p>As tools and methodologies for software development have evolved, the functional programming paradigm has washed over the tools we use across the stack.  Haskell has been a <a href=\"https://github.com/BinRoot/Haskell-Data-Analysis-Cookbook\">go-to tool for developers to use for data analysis</a> for close to three decades. On the other end, languages like <a href=\"https://www.typescriptlang.org/\">TypeScript</a> and <a href=\"http://elm-lang.org/\">Elm</a> have hit the front-end landscape like a wave. Thus allowing developers to develop type-safe applications that compile to browser-readable JavaScript. You've probably heard functional programming advocates discussing all the benefits of these tools and what you can do by putting more information into a type system. And well, they're right. On the front end, if you look closely, you can see <a href=\"https://redux.js.org/introduction/prior-art#elm\">how languages like Elm influenced the architecture libraries like Redux</a>.</p>\n<p>Statically-typed programming languages give you more control over how you build software.</p>\n<p>As a note, I'm not going to spend time covering basic types and primitives here. Understanding higher kinded and dynamically kinded types requires a solid understanding of Haskell's underlying basic type system and their primitives. If you don't have that foundation, this may not be the right article for you. It may end up being more confusing than helpful.</p>\n<h3>The Higher Kinds</h3>\n<p>As a quick refresher, at its core, a type is a way of classifying <em>things</em>. We assign types to functions and use them to compare a function's declared type and the values it returns. So, how do we define types in Haskell? If you're not already aware, a <a href=\"http://learnyouahaskell.com/making-our-own-types-and-typeclasses\">value constructor accepts a value and yields a value</a>. In a similar manner, a type constructor accepts a type and yields a type.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">data Maybe a\n  = Just a\n  | Nothing</code></pre></div>\n<p>Above, we declare a type <strong>Maybe</strong> that consists of two data constructors. <strong>Just</strong>, which accepts a value of type a, and <strong>Nothing</strong>, which does not accept any values at all. However, before we go any further, let's discuss those data constructors a bit more in depth.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">ghci&gt; :t Just\nJust :: a -&gt; Maybe a\nghci&gt; :t Nothing\nNothing :: Maybe a</code></pre></div>\n<p><strong>Just</strong> has a function type. This means that any value we give it will become a <strong>Maybe</strong> of that type. <strong>Nothing</strong>, however, can conjure up whatever type it wants without needing a value at all. This pattern is actually pretty common, and when we declare a type <code class=\"language-text\">Nothing :: Maybe a</code>, what we're actually saying is that <strong>Nothing</strong> is. value of <strong>Maybe a</strong> for any and all types <strong>a</strong> that may be provided to it.</p>\n<p>Armed with that knowledge, you might be driven to ask: what is the type of <strong>Maybe</strong>?</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">ghci&gt; :t Maybe\n\n\\&lt;interactive\\&gt;:1:1: error:\n  • Data constructor not in scope: Maybe\n  • Perhaps you meant variable ‘maybe’ (imported from Prelude)</code></pre></div>\n<p>Hold on a second. What's going on here? Does this mean that types don't have types of their own? Well, sort of. Types have <em>kinds</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">ghci&gt; :Kind Maybe\nMaybe :: * -&gt; *</code></pre></div>\n<p>What? What is <strong>*</strong>? <strong>*</strong> is the <em>kind</em> of types which have values. At its core, what this means is that the <em>kind</em> of <strong>Maybe</strong> accepts a type that has values. This is called <a href=\"https://www.stephanboyer.com/post/115/higher-rank-and-higher-kinded-types\">higher kinded polymorphism</a>. As a generalization, higher-minded polymorphism is a method for abstracting types from values. It's analogous to how functions already abstract values from values.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">Data HigherKinded a b\n = Bare b\n | Wrapped (a b)</code></pre></div>\n<p>Haskell's kind inference is fairly simple and straightforward. If you scroll back up to the top, you'll see the similarities between it and Haskell's type inference. This is because when we declare a type that applies a function <strong>a</strong> to a value <strong>b</strong>, Haskell knows that <strong>a</strong> must have the kind <code class=\"language-text\">* -&gt; *</code>, and a type of <em>kind</em> <strong>*</strong> that returns a type of <em>kind</em> <strong>*</strong>. In English, this means that <code class=\"language-text\">HigherKinded</code> accepts two types: the first of which is a function that does not have values itself, but when provided with a type that <em>does</em> have values, those values are then applied to the function. The second argument is simply a type that have values. Finally, it returns a type that can have ordinary values. *Think about how the <strong>Maybe</strong> type's kind would be defined in this way.*</p>\n<h3>Dynamically Kinded Programming</h3>\n<p>Moving on from higher kinded types, let's take a moment to discuss its lesser-known counterpart. The easiest way to discuss dynamically kinded types is through example.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">ghci&gt; data Void\nghci&gt; :kind Void\nVoid :: *</code></pre></div>\n<p>When we declare a type <strong>Void</strong> and a subsequently check for that type's kind, we're greeted by <strong>*</strong>. Are you surprised? In the same way that you can productively program at the value level with dynamic types as you learn how to do when building a foundation in functional programming, you can also program at the type level with dynamic kinds.</p>\n<p><em>At its core, that's what <strong>*</strong> represents</em>.</p>\n<p>Now that you understand that, we can start encoding our first type level numbers. As an example, we can start by defining types for <a href=\"https://en.wikipedia.org/wiki/Peano_axioms\">Peano natural numbers</a>. Defining our numbers will be as easy as defining two data constructors, <strong>Zero</strong> and the <strong>Succ</strong> (Successor) of some natural number.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">data Zero\ndata Succ a\n\ntype One = Succ Zero\ntype Two = Succ One\ntype Three = Succ Two\ntype Four = Succ (Succ (Succ (Succ Zero)))</code></pre></div>\n<p>As you can see from the example above, declaring our number types is as easy as using functional application with the two data constructors that we defined above. When defining subsequent types such as <strong>Two</strong>, or <strong>Three</strong>, you can observe that we can either reference already defined types to define the new type, or we can use functional application as in the case of the <strong>Four</strong> type. However, this method isn't without its caveats. There's nothing preventing us from declaring a type with <code class=\"language-text\">type One = Succ Bool</code>, which doesn't make any sense. In order to get around this, we'll need to introduce more kinds than the mere <strong>*</strong> kind that we've been dealing with until this point.</p>\n<h3>Data Kinds</h3>\n<p>The <code class=\"language-text\">DataKinds</code> GHC extension allows us to extend the functionality of data constructors into type constructors. As a consequence this also extends the type constructors into kind constructors. Just as with the above information, the best way to convey what this extension allows you to do is through example.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">{-# LANGUAGE DataKinds #-}\n\ndata Nat = Zero | Succ Nat</code></pre></div>\n<p>The definition above declares a new type <strong>Nat</strong> that consists of two value constructors, <strong>Zero</strong> and <strong>Succ</strong>. The <code class=\"language-text\">DataKinds</code> extension introduced a new kind <strong>Nat</strong>, which exists in a separate namespace. In addition to this, we also get two new types, <strong>'Zero</strong>, which has the kind of <strong>Nat</strong>, and <strong>'Succ</strong>, which accepts a type of kind <strong>Nat</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">ghci&gt; :kind &#39;Zero\n&#39;Zero :: Nat\nghci&gt; :kind &#39;Succ\n&#39;Succ :: Nat -&gt; Nat</code></pre></div>\n<p>Fairly simple, right? And as an aside, If we ever need to promote something a level up, we prefix the name with an apostrophe: <strong>'</strong>. Where it can be ambiguous, the <strong>'</strong> is used to disambiguate. Otherwise, Haskell will infer which you mean. After all, if we check the types, they should look the same!</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\">ghci&gt; :type Zero\nZero :: Nat\nghci&gt; :type Succ\nSucc :: Nat -&gt; Nat</code></pre></div>\n<p>And that's all that there is to it when it comes to extending our type and kind constructors. We now have the ability to architect pretty basic types and kinds. However, in order to actually use them, though, we'll need to dive in a little deeper.</p>\n<p><em>In the next article, part two of this series on type level programming, we'll discuss how to implement these types with GADTs, Vectors, Type Families, and more.</em></p>","id":"1c6c30ee-d23d-571b-9145-d32b65c614e9","frontmatter":{"date":"2018-04-10T17:12:33.962Z","path":"/2018/04/10/type-level-programming-part-1","title":"Type Level Programming: Part 1"}}},{"node":{"excerpt":"In 2016, I set out to learn functional programming through Haskell. It was partially because of the challenge of mastering a notoriously  difficult to learn  language, however, I most drawn to it because of its potential to radically change the way I…","html":"<p>In 2016, I set out to learn functional programming through Haskell. It was partially because of the challenge of mastering a notoriously <a href=\"https://www.quora.com/Why-is-Haskell-so-hard-to-learn\">difficult to learn</a> language, however, I most drawn to it because of its potential to radically change the way I approach problems in my day-to-day work. While I'm still far from mastering the language, a deeper understanding of functional programming <em>has</em> significantly influenced the way that I work.</p>\n<p>One of the concepts that has influenced me the most has been higher order functions (HOFs). In Haskell, functions can take functions as parameters and return a function as a result. HOFs are extremely useful when if comes to performing calculations by defining what stuff <em>is</em> rather than by the steps to perform an arbitrary state change. They're a really powerful tool when it comes to solving problems and thinking about programs.</p>\n<p>If you're not already aware, functions in Haskell can officially only take one argument. However, when learning Haskell, you'll often find yourself adding multiple parameters to a function like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ghci<span class=\"token operator\">></span> max 4 5\n5</code></pre></div>\n<p>We can also define a function that takes an argument which then returns a function that takes an argument of its own to apply that function twice.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\"><span class=\"token hvariable\">applyTwice</span> <span class=\"token operator\">::</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span>\n<span class=\"token hvariable\">applyTwice</span> <span class=\"token hvariable\">f</span> <span class=\"token hvariable\">x</span> <span class=\"token operator\">=</span> <span class=\"token hvariable\">f</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">f</span> <span class=\"token hvariable\">x</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ghci<span class=\"token operator\">></span> applyTwice <span class=\"token punctuation\">(</span>+3<span class=\"token punctuation\">)</span> 10\n16</code></pre></div>\n<p>So, what's going on here? Both the <code class=\"language-text\">max</code> and <code class=\"language-text\">applyTwice</code> functions look like they're taking two parameters. Putting a space between two values in Haskell <em>is</em> functional application. Let's take a look at the <code class=\"language-text\">applyTwice</code> type declaration one more time.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\"><span class=\"token hvariable\">applyTwice</span> <span class=\"token operator\">::</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span></code></pre></div>\n<p>You could also write this as a function <code class=\"language-text\">applyTwice</code> that takes a function <code class=\"language-text\">(a -&gt; a)</code>, which takes something and returns the same thing. The second parameter and return value are also of that type. This is called <a href=\"https://wiki.haskell.org/Currying\">currying</a>. You can think of the <code class=\"language-text\">max</code> function as a function that takes an additional parameter and either returns <code class=\"language-text\">4</code> or that parameter depending on which is bigger.</p>\n<p>Another HOF that we can define is the <code class=\"language-text\">map</code> function. It takes in two inputs - a function, and a list. It then applies the function to every element in the array.</p>\n<div class=\"gatsby-highlight\" data-language=\"haskell\"><pre class=\"language-haskell\"><code class=\"language-haskell\"><span class=\"token builtin\">map</span> <span class=\"token operator\">::</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span><span class=\"token operator\">-></span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">[</span><span class=\"token hvariable\">a</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">[</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">]</span>\n<span class=\"token builtin\">map</span> <span class=\"token hvariable\">f</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token builtin\">map</span> <span class=\"token hvariable\">f</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">x</span><span class=\"token operator\">:</span><span class=\"token hvariable\">xs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token hvariable\">f</span> <span class=\"token hvariable\">x</span> <span class=\"token operator\">:</span> <span class=\"token builtin\">map</span> <span class=\"token hvariable\">f</span> <span class=\"token hvariable\">xs</span></code></pre></div>\n<p>HOFs are powerful because they make your code more declarative, or rather shorter, simpler, and easier to read. Let's take a moment to step back from Haskell and talk about HOFs in a more familiar context with JavaScript.</p>\n<p>Just as with Haskell, the <code class=\"language-text\">map</code> function is an extremely useful tool for evaluating and applying functions to sets of data.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'user1'</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">:</span> <span class=\"token string\">'the first user'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'user2'</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">:</span> <span class=\"token string\">'the second user'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'user3'</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">:</span> <span class=\"token string\">'the third user'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">'user4'</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span> description<span class=\"token punctuation\">:</span> <span class=\"token string\">'the fourth user'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>However, before we get into the map function, let's take a second to think about the old way of evaluating a collection in JavaScript. When I started to learn how to program, <code class=\"language-text\">for</code> loops were the best way to iterate through objects in a given collection. If we wanted to iterate through the array we defined above and return an array that only contained adults, we would be able to define that function like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getAdults</span> <span class=\"token operator\">=</span> collection <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> results <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> collection<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> collection<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>age <span class=\"token operator\">>=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      results<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> results<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In all reality, the above function will work just fine. However, we can do the exact same thing in a much more declaritive way. <code class=\"language-text\">Array.Prototype.filter()</code> is a native method that allows us to create a new array that only consists of elements that pass a given logical test.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getAdults</span> <span class=\"token operator\">=</span> collection <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  collection<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>age <span class=\"token operator\">>=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">getAdults</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [{ name: 'user2' ... }, { name: 'user3' ... }, { name: 'user4' ... }]</span></code></pre></div>\n<p>Look at that! By using a HOF, we were able to reduce the amount of code required to define the <code class=\"language-text\">getAdults</code> function from 13 to just 3 lines. As another example, what if we wanted to perform an operation on each item in the array while returning the same items in a new array? Well, in that case we'd use <code class=\"language-text\">Array.Prototype.map()</code>.</p>\n<p>Let's say that we want to capitalize the name of each user in our array. That can be done easily like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">capitalizeNames</span> <span class=\"token operator\">=</span> collection <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  collection<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">getAdults</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [{ name: 'USER1' ... }, { name: 'USER2' ... }, { name: 'USER3' ... }, { name: 'USER4' ... }]</span></code></pre></div>\n<p>And, while those were just a few simple examples of HOFs, I think that they really help to illustrate just how useful these functions are when it comes to performing calculations by defining what stuf <em>is</em> rather than by steps to perform an arbitrary state change.</p>","id":"3f1c6977-e5fa-549f-8f37-dc7f72aff280","frontmatter":{"date":"2018-03-24T17:12:33.962Z","path":"/2018/03/24/higher-order-functions","title":"Higher Order Functions"}}},{"node":{"excerpt":"Over the past few weeks, I've been reading through and studying the problems in  Programming Pearls  in an effort to better understand algorithms and their design. In the book, there's an excellent example of a binary search implementation. Working…","html":"<p>Over the past few weeks, I've been reading through and studying the problems in <a href=\"https://www.amazon.com/Programming-Pearls-2nd-Jon-Bentley/dp/0201657880/ref=sr_1_1?ie=UTF8&#x26;qid=1510196681&#x26;sr=8-1&#x26;keywords=programming+pearls\">Programming Pearls</a> in an effort to better understand algorithms and their design. In the book, there's an excellent example of a binary search implementation. Working through the solution really caught my interest and inspired me to work through a front end implementation of a similar algorithm in JavaScript.</p>\n<p>Our binary search algorithm will work by evaluating a value in a set and determining if it is equal to, less than, or greater than the value you are searching for. If the key value is less than the the current index value, the stop index is set to the value of the current index - 1. If the greater than the current index value, the start index is set to the value of the current index + 1. If the key value is equal to the current index value, the search stops.</p>\n<p><strong>Let's define a problem to build our algorithm around:</strong></p>\n<p>Given a sequential array that contains at most 100 integers, find and log all of the integers between 0 and 100 that aren't in the array.</p>\n<p>Now that we have our challenge, we need outline the basic components of our algorithm. For the purposes of this example, we need an algorithm that takes an array and a key value and returns the index of the key value if it is present in the array. If the key value is not found, the function will return -1.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> index<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>This is the base of our algorithm. However, this code won't work. We need to define our starting and stoping indices as well as the current index value based on the current value of those variables.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> startIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> stopIndex <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>startIndex <span class=\"token operator\">+</span> stopIndex<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> index<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Our starting index will be set to 0. The stopping index will be dependent on the length of the array that we're evaluating. Our index value will then be calculated by adding our starting and stopping indices together and performing a bitwise operation to find the middle index of our array. We'll use this to perform our calculations.</p>\n<p>Now we need to write a conditional statement that executes the increment/decrement operation on our indices while the key value is not equal to the current index value and the starting index is not equal to the stopping index. At every step of our algorithm's execution, the current index value is evaluated, which determines what our algorithm does next.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">...</span>\n<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> key <span class=\"token operator\">&amp;&amp;</span> startIndex <span class=\"token operator\">&lt;</span> stopIndex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    stopIndex <span class=\"token operator\">=</span> index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key <span class=\"token operator\">></span> arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    startIndex <span class=\"token operator\">=</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  index <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>startIndex <span class=\"token operator\">+</span> stopIndex<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>The finished algorithm:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> startIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> stopIndex <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>startIndex <span class=\"token operator\">+</span> stopIndex<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> key <span class=\"token operator\">&amp;&amp;</span> startIndex <span class=\"token operator\">&lt;</span> stopIndex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      stopIndex <span class=\"token operator\">=</span> index <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key <span class=\"token operator\">></span> arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      startIndex <span class=\"token operator\">=</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    index <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>startIndex <span class=\"token operator\">+</span> stopIndex<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> index<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Our final conditional statement checks to see if the value was found, and if so, returns the index of the key value. If the value is not found, the function return -1.</p>\n<p>Now that we have our algorithm, let's return to our problem statement. We now need to perform a binary search on an array containing 1000 random integers. Let's build a function that takes an empty array and populates it with 1000 random values and then sorts the result to group together any duplicate values.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">populateArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Generate a random integer between two values</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">generateRandomInteger</span><span class=\"token punctuation\">(</span>min<span class=\"token punctuation\">,</span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>max <span class=\"token operator\">-</span> min<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> min<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Populate the array</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    myArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">generateRandomInteger</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Sort the array</span>\n  myArr<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> a <span class=\"token operator\">-</span> b<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>By running the populateArray function and logging the result, we'll be left with something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myArr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, ...];</span></code></pre></div>\n<p>So now that we have our array, let's run our binarySearch function.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span>myArr<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => 3</span>\n<span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span>myArr<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => 11</span></code></pre></div>\n<p>Notice that if our array contains duplicate integers, the index value returned by the binarySearch function will be the index of the last occurrence of that integer. Now we've got one final step to answering our question. We need to run the binary search over the entire array and log all of the numbers in our range that don't appear in our array. This can be done pretty simply by including the log inside of our return conditional in the binarySearch function and writing a test function that iterates the function 100 times.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">...</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> index<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> not found!`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span>myArr<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Running the test function will give output the following to the console:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token number\">0</span> not found<span class=\"token operator\">!</span>\n<span class=\"token number\">2</span> not found<span class=\"token operator\">!</span>\n<span class=\"token number\">6</span> not found<span class=\"token operator\">!</span>\n<span class=\"token number\">7</span> not found<span class=\"token operator\">!</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<p>That's it! The algorithm and test function satisfy all of the requirements of our prompt.</p>\n<p><strong>Conclusion</strong></p>\n<p>Searching arrays with a binary search function is an extremely efficient way to do so, because the maximum number of comparisons is limited by the conditions of our algorithm to <code class=\"language-text\">O(log(n))</code>. This is in contrast to a more traditional linear search method of indexOf which is has an efficiency of <code class=\"language-text\">O(n)</code>. After averaging 100 test cases, the average execution time of our binary search function was a mere 0.0501 milliseconds in Chrome.</p>\n<p>If you'd like to see my code, you can view it on <a href=\"https://gist.github.com/tylerreckart/fa0433056fea20a0d11b4358c17dca8d\">Github</a>.</p>","id":"f659aeab-4870-565e-8fc6-46456e0a05f7","frontmatter":{"date":"2016-09-16T17:12:33.962Z","path":"/2016/09/16/writing-a-binary-search-algorithm-in-javascript","title":"Writing a Binary Search Algorithm in JavaScript"}}}]}},"pageContext":{}}